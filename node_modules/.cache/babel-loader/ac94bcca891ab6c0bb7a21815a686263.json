{"ast":null,"code":"var _jsxFileName = \"/home/johan/dev/github/colonyos/dashboard/dashboard/src/App.js\";\nimport logo from './logo.svg';\nimport './App.css';\nimport './colonies/colonyruntime.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  let colonyid = \"4787a5071856a4acf702b2ffcea422e3237a679c681314113d86139461290cf4\";\n  let runtimeid = \"3fc05cf3df4b494e95d6a3d297a34f19938f7daa7422ab0d4f794454133341ac\";\n  let runtime_prvkey = \"ddf7f7791208083b6a9ed975a72684f6406a269cfa36f1b1c32045c0a71fff05\";\n  let runtime = new ColonyRuntime(\"rocinante\", \"50080\");\n\n  function assign() {\n    runtime.assignLatest(colonyid, runtime_prvkey).then(process => {\n      if (process.spec.func == \"setLampState\") {\n        if (process.spec.args[0] == \"on\") {\n          $(\"#lamp\").attr(\"src\", \"./lamp_on.png\");\n        }\n\n        if (process.spec.args[0] == \"off\") {\n          $(\"#lamp\").attr(\"src\", \"./lamp_off.png\");\n        }\n\n        runtime.closeProcess(process.processid, true, runtime_prvkey);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function subscribe() {\n    runtime.subscribeProcesses(\"cli\", 30, 0, runtime_prvkey, process => {\n      // re-subscribe every 30 seconds\n      assign();\n    }).catch(() => {\n      setTimeout(() => {\n        assign();\n        subscribe();\n      }, 2000);\n    });\n  }\n\n  runtime.load().then(() => {\n    assign();\n    subscribe();\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        className: \"App-logo\",\n        alt: \"logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Edit \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"src/App.js\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 26\n        }, this), \" and save to reload.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"App-link\",\n        href: \"https://reactjs.org\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"Learn React\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","App","colonyid","runtimeid","runtime_prvkey","runtime","ColonyRuntime","assign","assignLatest","then","process","spec","func","args","$","attr","closeProcess","processid","catch","err","console","log","subscribe","subscribeProcesses","setTimeout","load"],"sources":["/home/johan/dev/github/colonyos/dashboard/dashboard/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport './colonies/colonyruntime.js';\n\nfunction App() {\n    let colonyid = \"4787a5071856a4acf702b2ffcea422e3237a679c681314113d86139461290cf4\"\n    let runtimeid = \"3fc05cf3df4b494e95d6a3d297a34f19938f7daa7422ab0d4f794454133341ac\"\n    let runtime_prvkey = \"ddf7f7791208083b6a9ed975a72684f6406a269cfa36f1b1c32045c0a71fff05\"\n    let runtime = new ColonyRuntime(\"rocinante\", \"50080\")\n\n    function assign() {\n        runtime.assignLatest(colonyid, runtime_prvkey)\n            .then((process) => {\n                if (process.spec.func == \"setLampState\") {\n                    if (process.spec.args[0] == \"on\") {\n                        $(\"#lamp\").attr(\"src\", \"./lamp_on.png\");\n                    }\n                    if (process.spec.args[0] == \"off\") {\n                        $(\"#lamp\").attr(\"src\", \"./lamp_off.png\");\n                    }\n\n                    runtime.closeProcess(process.processid, true, runtime_prvkey)\n                }\n            })\n            .catch((err) => {\n                console.log(err)\n            })\n    }\n\n    function subscribe() {\n        runtime.subscribeProcesses(\"cli\", 30, 0, runtime_prvkey, (process) => { // re-subscribe every 30 seconds\n            assign()\n        })\n            .catch(() => {\n                setTimeout(() => {\n                    assign()\n                    subscribe()\n                }, 2000);\n            })\n    }\n\n    runtime.load().then(() => {\n        assign()\n        subscribe()\n    })\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                <p>\n                    Edit <code>src/App.js</code> and save to reload.\n                </p>\n                <a\n                    className=\"App-link\"\n                    href=\"https://reactjs.org\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                >\n                    Learn React\n                </a>\n            </header>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,YAAjB;AACA,OAAO,WAAP;AACA,OAAO,6BAAP;;;AAEA,SAASC,GAAT,GAAe;EACX,IAAIC,QAAQ,GAAG,kEAAf;EACA,IAAIC,SAAS,GAAG,kEAAhB;EACA,IAAIC,cAAc,GAAG,kEAArB;EACA,IAAIC,OAAO,GAAG,IAAIC,aAAJ,CAAkB,WAAlB,EAA+B,OAA/B,CAAd;;EAEA,SAASC,MAAT,GAAkB;IACdF,OAAO,CAACG,YAAR,CAAqBN,QAArB,EAA+BE,cAA/B,EACKK,IADL,CACWC,OAAD,IAAa;MACf,IAAIA,OAAO,CAACC,IAAR,CAAaC,IAAb,IAAqB,cAAzB,EAAyC;QACrC,IAAIF,OAAO,CAACC,IAAR,CAAaE,IAAb,CAAkB,CAAlB,KAAwB,IAA5B,EAAkC;UAC9BC,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgB,KAAhB,EAAuB,eAAvB;QACH;;QACD,IAAIL,OAAO,CAACC,IAAR,CAAaE,IAAb,CAAkB,CAAlB,KAAwB,KAA5B,EAAmC;UAC/BC,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgB,KAAhB,EAAuB,gBAAvB;QACH;;QAEDV,OAAO,CAACW,YAAR,CAAqBN,OAAO,CAACO,SAA7B,EAAwC,IAAxC,EAA8Cb,cAA9C;MACH;IACJ,CAZL,EAaKc,KAbL,CAaYC,GAAD,IAAS;MACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ;IACH,CAfL;EAgBH;;EAED,SAASG,SAAT,GAAqB;IACjBjB,OAAO,CAACkB,kBAAR,CAA2B,KAA3B,EAAkC,EAAlC,EAAsC,CAAtC,EAAyCnB,cAAzC,EAA0DM,OAAD,IAAa;MAAE;MACpEH,MAAM;IACT,CAFD,EAGKW,KAHL,CAGW,MAAM;MACTM,UAAU,CAAC,MAAM;QACbjB,MAAM;QACNe,SAAS;MACZ,CAHS,EAGP,IAHO,CAAV;IAIH,CARL;EASH;;EAEDjB,OAAO,CAACoB,IAAR,GAAehB,IAAf,CAAoB,MAAM;IACtBF,MAAM;IACNe,SAAS;EACZ,CAHD;EAIA,oBACI;IAAK,SAAS,EAAC,KAAf;IAAA,uBACI;MAAQ,SAAS,EAAC,YAAlB;MAAA,wBACI;QAAK,GAAG,EAAEtB,IAAV;QAAgB,SAAS,EAAC,UAA1B;QAAqC,GAAG,EAAC;MAAzC;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAA,iCACS;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADT;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ,eAKI;QACI,SAAS,EAAC,UADd;QAEI,IAAI,EAAC,qBAFT;QAGI,MAAM,EAAC,QAHX;QAII,GAAG,EAAC,qBAJR;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QALJ;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAkBH;;KA3DQC,G;AA6DT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}